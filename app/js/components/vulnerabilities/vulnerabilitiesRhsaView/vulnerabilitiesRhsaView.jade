.page-vulnerabilities-rhsa(ng-if='!loading')
  section.vulnerability-details-header
    page-header(title="{{:: rhsa.id}}", subtitle="pageHeaderSubtitle")
    .page-header-aside.icon-inline.severity(ng-class="{{'rhsa.severity'}}")
      i.fa.fa-shield
      span {{:: rhsa.severity}}
    .description
      h2.section-title.section-title-red Topic
      span {{:: rhsa.topic}}
      h2.section-title.section-title-red Description
      span {{:: rhsa.description}}
      .solution
        h2.section-title.section-title-red Solution
        span {{:: rhsa.solution}}
    .description-aside
      h2.section-title.section-title-red Affected Products
      ul.affected-product-list
        li.affected-product(ng-repeat="product in rhsa.affected_products") {{:: product}}

  section.vulnerability-tables
    .primary
      table-filters
        search-box(placeholder="{{'Search RHSAs' | translate}}", on-search='search(model)')
      .table-header
        .dropdown
          md-button.button-dropdown(
            data-toggle='dropdown',
            aria-haspopup='true',
            aria-expanded='false',
            aria-label='Actions Dropdown',
            translate,
            ng-disabled='!checkboxes.totalChecked || !config.isPlannerEnabled') Actions
            span.caret
          .dropdown-menu
            md-button.full-width.md-no-margin(translate) Create a new Plan/Playbook
            md-button.full-width.md-no-margin(translate) Add to existing Plan/Playbook
        .table-header-title
          h3.system-count(translate, translate-n='totalSystems', translate-plural='{{:: $count}} Impacted Systems') 1 Impacted System
          small.light(ng-if='checkboxes.totalChecked', translate) &nbsp; {{checkboxes.totalChecked}} Selected
            span(ng-if='allSelected && pager.perPage < totalSystems') .
              a(ng-if='!reallyAllSelected', ng-click='reallySelectAll()') &nbsp;Select All Systems.
              a(ng-if='reallyAllSelected', ng-click='deselectAll()') &nbsp;Deselect All Systems.
            span )
      table
        thead
          tr
            th.min
              md-checkbox.md-accent.md-hue-1.md-checkbox-list(
                tooltip='Select All',
                type="checkbox",
                aria-label='Select All Systems Checkbox',
                md-indeterminate="checkboxes.indeterminate",
                ng-model='checkboxes.checked',
                ng-change='selectAll(); checkboxes.checkboxChecked(checkboxes.checked, rhsa.systems)')
            th.min.sortable(translate) Type
            th.sortable(translate) Name
            th.min.fit-content.sortable(translate) Last Check In

        tbody
          tr(ng-click='checkboxes.rowClick($event, system.system_id)',
             ng-mousedown='checkboxes.rowClick($event, system.system_id)',
             ng-class="{'stale': !system.isCheckingIn}",
             ng-repeat='system in rhsa.systems track by system.system_id',
             data-id="{{:: system.system_id}}")
            td.min
              md-checkbox.md-accent.md-hue-1.md-checkbox-list(
                type='checkbox',
                aria-label='Select System Checkbox',
                ng-model='checkboxes.items[system.system_id]',
                ng-click='checkboxes.rowClick($event, system.system_id); $event.stopPropagation();',
              )
            td.fit-content
              type-icon(type-id='system.system_type_id', include-text='true')
            td.break
              a(ng-click='showSystem(system, true, tabs.vulnerabilities)') {{:: system.toString }}
            td.fit-content {{:: system.last_check_in | timeAgo}}
    .secondary
      table
          thead
            tr
              th.fit-content.nowrap.sortable Related Packages
          tbody
            tr(ng-repeat='package in rhsa.packages')
              td.fit-content.nowrap
                a(ui-sref='app.vulnerabilities-package({package_id: package.id})') {{:: package.name}}
